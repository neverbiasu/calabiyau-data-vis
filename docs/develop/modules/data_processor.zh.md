# 后端模块: 数据处理器 (ETL)

**上下文**: 集成在 `scripts/crawl.ts` 内部。
**职责**: 在保存之前清理、转换和验证原始数据。

## 1. 转换逻辑

### 1.1 类型映射
将中文角色名映射为英文武器类型/职业 + 英文 ID。
- **来源**: `TYPE_MAP` 常量表。
- **示例**: `米雪儿` -> `Investigator` (搜查官), `w_michelle` (ID)。

### 1.2 数值解析
- **Buff 标记**: 处理如 `25(30)` 的字符串。
  - 逻辑: 正则 `^(\d+)` 提取 `25`。括号内数值在 MVP 阶段暂忽略。
- **霰弹枪标记**: 处理如 `12x8` 的字符串。
  - 逻辑: 解析基础伤害为 `12`。存储弹丸数 `pellets: 8`。
  - 爆发计算: $12 \times 8 \times 弹容 = 总爆发伤害$。

### 1.3 衍生属性计算
- **DPS (躯干)**: $\frac{RPM}{60} \times 躯干伤害$。
- **DPS (爆头)**: $\frac{RPM}{60} \times 爆头伤害$。

## 2. 验证 (Validation)
在写入 `data.json` 之前：
1. 统计记录总数。
2. 检查是否存在 `null` ID。
3. 确保数值字段为有效数字 (非 `NaN`)。

## 3. 输出
输出到标准输出 (Logs) 和文件系统 (`public/data.json`)。
